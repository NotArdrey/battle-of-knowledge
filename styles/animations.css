@keyframes pulse-glow {
    0%, 100% { filter: drop-shadow(0 0 10px rgba(251, 191, 36, 0.6)); }
    50% { filter: drop-shadow(0 0 25px rgba(251, 146, 60, 1)); }
}

@keyframes damage-popup {
    0% { transform: translateY(0) scale(0.5) rotate(-10deg); opacity: 0; }
    20% { transform: translateY(-10px) scale(1.3) rotate(5deg); opacity: 1; }
    50% { transform: translateY(-40px) scale(1.2) rotate(-3deg); opacity: 1; }
    100% { transform: translateY(-80px) scale(0.8) rotate(0deg); opacity: 0; }
}

@keyframes critical-popup {
    0% { transform: translate(-50%, -50%) scale(0.3) rotate(-15deg); opacity: 0; }
    30% { transform: translate(-50%, -50%) scale(1.4) rotate(5deg); opacity: 1; }
    60% { transform: translate(-50%, -50%) scale(1.2) rotate(-3deg); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(1.5) rotate(0deg); opacity: 0; }
}

@keyframes attack-animation {
    0% { transform: translateX(0) scale(1); }
    30% { transform: translateX(40px) scale(1.1); }
    50% { transform: translateX(35px) scale(1.08); }
    100% { transform: translateX(0) scale(1); }
}

@keyframes attack-animation-flipped {
    0% { transform: scaleX(-1) translateX(0) scaleY(1); }
    30% { transform: scaleX(-1) translateX(-40px) scaleY(1.1); }
    50% { transform: scaleX(-1) translateX(-35px) scaleY(1.08); }
    100% { transform: scaleX(-1) translateX(0) scaleY(1); }
}

@keyframes hurt-animation-flipped {
    0% { transform: scaleX(-1) translateX(0) scaleY(1); filter: brightness(1); }
    15% { transform: scaleX(-1) translateX(-25px) scaleY(0.93); filter: brightness(1.5); }
    30% { transform: scaleX(-1) translateX(5px) scaleY(0.97); filter: brightness(1.3); }
    45% { transform: scaleX(-1) translateX(-15px) scaleY(0.95); filter: brightness(1.2); }
    60% { transform: scaleX(-1) translateX(0) scaleY(0.98); filter: brightness(1.1); }
    100% { transform: scaleX(-1) translateX(0) scaleY(1); filter: brightness(1); }
}

@keyframes victory-bounce-flipped {
    0%, 100% { transform: scaleX(-1) translateY(0) scaleY(1); }
    25% { transform: scaleX(-1) translateY(-15px) scaleY(1.08); }
    50% { transform: scaleX(-1) translateY(0) scaleY(1.03); }
    75% { transform: scaleX(-1) translateY(-8px) scaleY(1.05); }
}

@keyframes hurt-animation {
    0% { transform: translateX(0) scale(1); filter: brightness(1); }
    15% { transform: translateX(-25px) scale(0.93); filter: brightness(1.5); }
    30% { transform: translateX(5px) scale(0.97); filter: brightness(1.3); }
    45% { transform: translateX(-15px) scale(0.95); filter: brightness(1.2); }
    60% { transform: translateX(0) scale(0.98); filter: brightness(1.1); }
    100% { transform: translateX(0) scale(1); filter: brightness(1); }
}

@keyframes victory-bounce {
    0%, 100% { transform: translateY(0) scale(1); }
    25% { transform: translateY(-15px) scale(1.08); }
    50% { transform: scale(1.03); }
    75% { transform: translateY(-8px) scale(1.05); }
}

.animate-pulse-glow {
    animation: pulse-glow 1.5s ease infinite;
}

.character.attacking {
    animation: attack-animation 1.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.character.hurt {
    animation: hurt-animation 1.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.character.victory {
    animation: victory-bounce 1.5s ease infinite;
}

.damage-number {
    position: absolute;
    font-size: 40px;
    font-weight: 800;
    color: #ef4444;
    text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.9), 0 0 15px #fbbf24, 0 0 25px #fb923c;
    animation: damage-popup 1.5s ease forwards;
    pointer-events: none;
    z-index: 100;
}

.critical-text {
    position: absolute;
    top: 30%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 60px;
    font-weight: 800;
    color: #fbbf24;
    text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.9), 0 0 20px #ef4444, 0 0 40px #fb923c;
    animation: critical-popup 1.5s ease forwards;
    pointer-events: none;
    z-index: 100;
}

.answer-btn.correct {
    background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%) !important;
    border-color: #15803d !important;
    color: white !important;
}

.answer-btn.incorrect {
    background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
    border-color: #b91c1c !important;
    color: white !important;
}

/* Smooth sprite transitions */
.sprite-image {
    transition: opacity 0.15s ease-in-out;
}

/* Background transition */
#battleBackground {
    transition: background-image 0.5s ease-in-out;
}

/* Enemy character flipped to face left */
#enemyCharacter {
    transform: scaleX(-1);
}

/* Maintain flip during animations */
#enemyCharacter.attacking {
    animation: attack-animation-flipped 1.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#enemyCharacter.hurt {
    animation: hurt-animation-flipped 1.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#enemyCharacter.victory {
    animation: victory-bounce-flipped 1.5s ease infinite;
}

/* No flip for characters that already face left in their sprites */
#enemyCharacter.no-flip {
    transform: scaleX(1);
}

#enemyCharacter.no-flip.attacking {
    animation: attack-animation 1.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#enemyCharacter.no-flip.hurt {
    animation: hurt-animation 1.2s cubic-bezier(0.4, 0, 0.2, 1);
}

#enemyCharacter.no-flip.victory {
    animation: victory-bounce 1.5s ease infinite;
}

/* Mobile Responsive Adjustments */
@media (max-width: 640px) {
    .damage-number {
        font-size: 28px;
    }
    
    .critical-text {
        font-size: 40px;
    }
}

/* Prevent horizontal scroll on mobile */
body {
    overflow-x: hidden;
}

/* Touch-friendly buttons */
@media (hover: none) and (pointer: coarse) {
    button {
        -webkit-tap-highlight-color: transparent;
    }
}

/* Enhanced character shadow for better visibility on backgrounds */
.character-shadow {
    filter: 
        drop-shadow(0 10px 20px rgba(0, 0, 0, 0.4)) 
        drop-shadow(0 5px 5px rgba(0, 0, 0, 0.3))
        drop-shadow(0 0 10px rgba(0, 0, 0, 0.2));
}

/* Add to animations.css */

/* HP Bar color transition */
.hp-bar-fill {
    transition: 
        width 0.7s cubic-bezier(0.4, 0, 0.2, 1),
        background 0.5s ease-in-out;
}

/* Add to animations.css */

/* Sword Attack Effect */
@keyframes sword-swing {
    0% { transform: rotate(0deg) scale(0.8); opacity: 0; }
    20% { transform: rotate(45deg) scale(1.3); opacity: 1; }
    40% { transform: rotate(90deg) scale(1.5); opacity: 0.8; }
    60% { transform: rotate(135deg) scale(1.3); opacity: 0.6; }
    80% { transform: rotate(180deg) scale(1); opacity: 0.4; }
    100% { transform: rotate(225deg) scale(0.8); opacity: 0; }
}

@keyframes sword-swing-flipped {
    0% { transform: scaleX(-1) rotate(0deg) scale(0.8); opacity: 0; }
    20% { transform: scaleX(-1) rotate(-45deg) scale(1.3); opacity: 1; }
    40% { transform: scaleX(-1) rotate(-90deg) scale(1.5); opacity: 0.8; }
    60% { transform: scaleX(-1) rotate(-135deg) scale(1.3); opacity: 0.6; }
    80% { transform: scaleX(-1) rotate(-180deg) scale(1); opacity: 0.4; }
    100% { transform: scaleX(-1) rotate(-225deg) scale(0.8); opacity: 0; }
}

@keyframes sword-trail {
    0% { transform: scale(0.8) rotate(0deg); opacity: 0; }
    30% { transform: scale(1.2) rotate(45deg); opacity: 0.8; }
    50% { transform: scale(1.5) rotate(90deg); opacity: 0.6; }
    70% { transform: scale(1.2) rotate(135deg); opacity: 0.4; }
    100% { transform: scale(0.8) rotate(180deg); opacity: 0; }
}

@keyframes sword-trail-flipped {
    0% { transform: scaleX(-1) scale(0.8) rotate(0deg); opacity: 0; }
    30% { transform: scaleX(-1) scale(1.2) rotate(-45deg); opacity: 0.8; }
    50% { transform: scaleX(-1) scale(1.5) rotate(-90deg); opacity: 0.6; }
    70% { transform: scaleX(-1) scale(1.2) rotate(-135deg); opacity: 0.4; }
    100% { transform: scaleX(-1) scale(0.8) rotate(-180deg); opacity: 0; }
}

/* Gun Attack Effect */
@keyframes gun-flash {
    0% { transform: scale(0.5); opacity: 0; }
    15% { transform: scale(1.5); opacity: 1; }
    30% { transform: scale(1.3); opacity: 0.8; }
    45% { transform: scale(1.1); opacity: 0.6; }
    60% { transform: scale(0.9); opacity: 0.4; }
    100% { transform: scale(0.5); opacity: 0; }
}

@keyframes gun-flash-flipped {
    0% { transform: scaleX(-1) scale(0.5); opacity: 0; }
    15% { transform: scaleX(-1) scale(1.5); opacity: 1; }
    30% { transform: scaleX(-1) scale(1.3); opacity: 0.8; }
    45% { transform: scaleX(-1) scale(1.1); opacity: 0.6; }
    60% { transform: scaleX(-1) scale(0.9); opacity: 0.4; }
    100% { transform: scaleX(-1) scale(0.5); opacity: 0; }
}

@keyframes bullet-trail {
    0% { transform: translateX(0) scale(0.2); opacity: 0; }
    20% { transform: translateX(40px) scale(0.5); opacity: 1; }
    40% { transform: translateX(80px) scale(0.8); opacity: 0.8; }
    60% { transform: translateX(120px) scale(1); opacity: 0.6; }
    80% { transform: translateX(160px) scale(1.2); opacity: 0.4; }
    100% { transform: translateX(200px) scale(1.5); opacity: 0; }
}

@keyframes bullet-trail-flipped {
    0% { transform: scaleX(-1) translateX(0) scale(0.2); opacity: 0; }
    20% { transform: scaleX(-1) translateX(-40px) scale(0.5); opacity: 1; }
    40% { transform: scaleX(-1) translateX(-80px) scale(0.8); opacity: 0.8; }
    60% { transform: scaleX(-1) translateX(-120px) scale(1); opacity: 0.6; }
    80% { transform: scaleX(-1) translateX(-160px) scale(1.2); opacity: 0.4; }
    100% { transform: scaleX(-1) translateX(-200px) scale(1.5); opacity: 0; }
}

/* Magic Attack Effect */
@keyframes magic-burst {
    0% { transform: scale(0.3); filter: blur(0px); opacity: 0; }
    25% { transform: scale(1.5); filter: blur(5px); opacity: 1; }
    50% { transform: scale(2); filter: blur(10px); opacity: 0.8; }
    75% { transform: scale(1.5); filter: blur(5px); opacity: 0.6; }
    100% { transform: scale(0.3); filter: blur(0px); opacity: 0; }
}

@keyframes magic-orb {
    0% { transform: scale(0.5) rotate(0deg); opacity: 0; }
    20% { transform: scale(1.2) rotate(45deg); opacity: 1; }
    40% { transform: scale(1.5) rotate(90deg); opacity: 0.8; }
    60% { transform: scale(1.2) rotate(135deg); opacity: 0.6; }
    80% { transform: scale(0.8) rotate(180deg); opacity: 0.4; }
    100% { transform: scale(0.5) rotate(225deg); opacity: 0; }
}

@keyframes magic-orb-flipped {
    0% { transform: scaleX(-1) scale(0.5) rotate(0deg); opacity: 0; }
    20% { transform: scaleX(-1) scale(1.2) rotate(-45deg); opacity: 1; }
    40% { transform: scaleX(-1) scale(1.5) rotate(-90deg); opacity: 0.8; }
    60% { transform: scaleX(-1) scale(1.2) rotate(-135deg); opacity: 0.6; }
    80% { transform: scaleX(-1) scale(0.8) rotate(-180deg); opacity: 0.4; }
    100% { transform: scaleX(-1) scale(0.5) rotate(-225deg); opacity: 0; }
}

@keyframes magic-sparkle {
    0% { transform: translateY(0) rotate(0deg); opacity: 0; }
    30% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
    60% { transform: translateY(-40px) rotate(360deg); opacity: 0.5; }
    100% { transform: translateY(-60px) rotate(540deg); opacity: 0; }
}

@keyframes magic-ring {
    0% { transform: scale(0.5) rotate(0deg); opacity: 0; }
    30% { transform: scale(2) rotate(180deg); opacity: 0.8; }
    60% { transform: scale(2.5) rotate(360deg); opacity: 0.6; }
    90% { transform: scale(3) rotate(540deg); opacity: 0.4; }
    100% { transform: scale(3.5) rotate(720deg); opacity: 0; }
}

@keyframes magic-ring-flipped {
    0% { transform: scaleX(-1) scale(0.5) rotate(0deg); opacity: 0; }
    30% { transform: scaleX(-1) scale(2) rotate(-180deg); opacity: 0.8; }
    60% { transform: scaleX(-1) scale(2.5) rotate(-360deg); opacity: 0.6; }
    90% { transform: scaleX(-1) scale(3) rotate(-540deg); opacity: 0.4; }
    100% { transform: scaleX(-1) scale(3.5) rotate(-720deg); opacity: 0; }
}

/* Add to animations.css */

/* animations.css - OPTIMIZED FOR MOBILE */

/* Replace the extreme-shake with mobile-optimized version */
@keyframes mobile-shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-8px); }
    50% { transform: translateX(8px); }
    75% { transform: translateX(-8px); }
}

/* Optimized damage popup for mobile */
@keyframes mobile-damage-popup {
    0% { transform: translateY(0) scale(0.5); opacity: 0; }
    20% { transform: translateY(-20px) scale(1.2); opacity: 1; }
    100% { transform: translateY(-60px) scale(0.8); opacity: 0; }
}

/* Performance-friendly effects */
@keyframes optimized-flash {
    0%, 100% { opacity: 0; }
    50% { opacity: 0.4; }
}

/* Hardware accelerated transforms */
.hardware-accelerated {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
}

/* Effect classes */
.sword-effect {
    position: absolute;
    width: 60px;
    height: 60px;
    background-image: url('assets/Effects/sword.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    z-index: 30;
    pointer-events: none;
    filter: drop-shadow(0 0 10px #ff6b00) brightness(1.5);
}

.gun-flash {
    position: absolute;
    width: 40px;
    height: 40px;
    background-image: url('assets/Effects/gun-flash.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    z-index: 30;
    pointer-events: none;
    filter: drop-shadow(0 0 15px #ffd700) brightness(2);
}

.bullet-trail {
    position: absolute;
    width: 20px;
    height: 20px;
    background-image: url('assets/Effects/bullet.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    z-index: 29;
    pointer-events: none;
    filter: drop-shadow(0 0 8px #ff0000);
}

.magic-burst {
    position: absolute;
    width: 80px;
    height: 80px;
    background: radial-gradient(circle, #4f46e5, #818cf8, #c7d2fe);
    border-radius: 50%;
    z-index: 30;
    pointer-events: none;
    filter: blur(5px);
    mix-blend-mode: screen;
}

.magic-orb {
    position: absolute;
    width: 50px;
    height: 50px;
    background: radial-gradient(circle, #8b5cf6, #a78bfa, #ddd6fe);
    border-radius: 50%;
    z-index: 30;
    pointer-events: none;
    filter: drop-shadow(0 0 15px #8b5cf6);
}

.magic-sparkle {
    position: absolute;
    width: 20px;
    height: 20px;
    background: radial-gradient(circle, #ffffff, #f0abfc, #d946ef);
    border-radius: 50%;
    z-index: 31;
    pointer-events: none;
    filter: drop-shadow(0 0 8px #ffffff);
}

.magic-ring {
    position: absolute;
    width: 60px;
    height: 60px;
    border: 3px solid #a78bfa;
    border-radius: 50%;
    z-index: 29;
    pointer-events: none;
    filter: drop-shadow(0 0 10px #a78bfa);
}

.sword-trail {
    position: absolute;
    width: 40px;
    height: 40px;
    background-image: url('assets/Effects/sword-trail.png');
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    z-index: 28;
    pointer-events: none;
    opacity: 0.7;
    filter: drop-shadow(0 0 8px #ffa500);
}

/* Character-specific effect lists */
.sword-users = ['Lapu-Lapu', 'Raja Humabon', 'Ferdinand Magellan', 
                'Spanish Soldier', 'Early Spanish Soldier Era', 
                'Andres Bonifacio', 'Emilio Aguinaldo', 
                'Commodore George Dewey', 'General Juan Luna'];

.gun-users = ['American Soldier', 'Douglas MacArthur', 'Japanese Soldier'];

.magic-users = ['Jose Rizal', 'Apolinario Mabini'];

/* animations.css - Add Boss Animations */

/* Boss Warning Animation */
@keyframes boss-warning {
    0% { 
        transform: translate(-50%, -50%) scale(0.1); 
        opacity: 0; 
        filter: blur(20px);
    }
    20% { 
        transform: translate(-50%, -50%) scale(1.2); 
        opacity: 1; 
        filter: blur(0px);
    }
    40% { 
        transform: translate(-50%, -50%) scale(1); 
        opacity: 1; 
        filter: blur(0px);
    }
    80% { 
        transform: translate(-50%, -50%) scale(1); 
        opacity: 1; 
        filter: blur(0px);
    }
    100% { 
        transform: translate(-50%, -50%) scale(1.5); 
        opacity: 0; 
        filter: blur(20px);
    }
}

/* Enhanced damage popup for boss battles */
@keyframes boss-damage-popup {
    0% { transform: translateY(0) scale(0.5) rotate(-15deg); opacity: 0; }
    20% { transform: translateY(-15px) scale(1.4) rotate(10deg); opacity: 1; }
    50% { transform: translateY(-50px) scale(1.3) rotate(-5deg); opacity: 1; }
    100% { transform: translateY(-100px) scale(0.9) rotate(0deg); opacity: 0; }
}

.boss-damage {
    animation: boss-damage-popup 2s ease-out forwards;
    text-shadow: 
        4px 4px 8px rgba(0, 0, 0, 1),
        0 0 40px #dc2626,
        0 0 80px #b91c1c,
        0 0 120px #7f1d1d !important;
}

/* Boss HP Bar Pulsing Effect */
@keyframes boss-hp-pulse {
    0%, 100% { box-shadow: inset 0 0 0 rgba(220, 38, 38, 0.5); }
    50% { box-shadow: inset 0 0 20px rgba(220, 38, 38, 0.8); }
}

.boss-hp-bar {
    animation: boss-hp-pulse 2s ease-in-out infinite;
    border: 3px solid #dc2626 !important;
}

/* Enhanced screen shake for boss attacks */
@keyframes boss-shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
    20%, 40%, 60%, 80% { transform: translateX(10px); }
}

.boss-attack-shake {
    animation: boss-shake 0.5s ease-out;
}

/* Boss defeated effect */
@keyframes boss-defeated {
    0% { 
        transform: scale(1) rotate(0deg); 
        opacity: 1; 
        filter: brightness(1);
    }
    30% { 
        transform: scale(1.2) rotate(-5deg); 
        opacity: 0.9; 
        filter: brightness(1.5);
    }
    60% { 
        transform: scale(0.8) rotate(5deg); 
        opacity: 0.7; 
        filter: brightness(2);
    }
    100% { 
        transform: scale(0) rotate(0deg); 
        opacity: 0; 
        filter: brightness(3);
    }
}

.boss-defeated {
    animation: boss-defeated 1.5s ease-out forwards;
}

/* Victory glow for boss battles */
@keyframes boss-victory-glow {
    0%, 100% { 
        box-shadow: 0 0 20px rgba(251, 191, 36, 0.5),
                    0 0 40px rgba(251, 191, 36, 0.3),
                    0 0 60px rgba(251, 191, 36, 0.1);
    }
    50% { 
        box-shadow: 0 0 40px rgba(251, 191, 36, 0.8),
                    0 0 80px rgba(251, 191, 36, 0.5),
                    0 0 120px rgba(251, 191, 36, 0.2);
    }
}

.victory-glow {
    animation: boss-victory-glow 2s ease-in-out infinite;
}

/* Enemy counter display */
.enemy-counter {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.7);
    color: white;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: bold;
    z-index: 25;
    border: 2px solid #92400e;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

/* Mobile responsive for boss effects */
@media (max-width: 640px) {
    @keyframes boss-warning {
        0% { 
            transform: translate(-50%, -50%) scale(0.1); 
            opacity: 0; 
            filter: blur(10px);
        }
        20% { 
            transform: translate(-50%, -50%) scale(1.1); 
            opacity: 1; 
            filter: blur(0px);
        }
        40% { 
            transform: translate(-50%, -50%) scale(0.9); 
            opacity: 1; 
            filter: blur(0px);
        }
        80% { 
            transform: translate(-50%, -50%) scale(0.9); 
            opacity: 1; 
            filter: blur(0px);
        }
        100% { 
            transform: translate(-50%, -50%) scale(1.2); 
            opacity: 0; 
            filter: blur(10px);
        }
    }
    
    .enemy-counter {
        font-size: 12px;
        padding: 6px 12px;
        top: 5px;
    }
}

/* For landscape mode */
@media (orientation: landscape) and (max-height: 600px) {
    .enemy-counter {
        top: 5px;
        padding: 4px 10px;
        font-size: 11px;
    }
}
